<!DOCTYPE html>
<html>

<head>
    {% include 'common/header.html' %}

    {% block early_script %}
    <script type="text/javascript">
        function printPage(divName) {
            const xhr = new XMLHttpRequest();
            xhr.open("POST", '/print', false);
            xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
            xhr.send("serial=" + {{ receipt.serial }});
            window.print();
            window.location.replace("/donation");
        }
    </script>
    {% endblock %}
</head>

<body>
    {% block content %}
    <div class="tabular">
        <div class="row">
            <div class="column" style="text-align: right; width: 33%">
                <img src="{{ url_for('static', filename='img/logo.png') }}" alt="logo" width="100" height="100">
            </div>
            <div class="column" style="text-align: center; width: 33%">
                <h2>SHARADA ASHRAMA</h2>
                <p>...placeholder for ashram details...</p>
            </div>
            <div class="column" style="text-align: left; width: 33%">

                {% if receipt.printed == True %}
                <h4>DONATION RECEIPT (DUPLICATE)</h4>
                {% else %}
                <h4>DONATION RECEIPT</h4>
                {% endif %}
                <p>
                    Serial No.: {{ receipt.serial }}<br>
                    Donation Date: {{ receipt.datetime.strftime('%b %-d %Y') }}
                </p>
            </div>
        </div>

        <div class="row">
            <div class="column" style="text-align: right; width: 40%">
                <p>
                    Received with<br>
                    thanks from:
                </p>
            </div>
            <div class="column" style="text-align: left; width: 40%">
                <h3>{{ donor.name }}</h3>
                <p>
                    {% if donor.address is not none %}
                    {{ donor.address }}<br>
                    {% endif %}

                    PAN:
                    {% if donor.pan is not none %}
                    {{ donor.pan }}<br>
                    {% else %}
                    Not provided.<br>
                    {% endif %}
                </p>
            </div>
            <div class="column" style="width: 100%">
            </div>
        </div>

        <div class="row">
            <div class="column" style="text-align: right; width: 40%">
                <p>
                    <b>The sum of (Rs.):</b><br>
                    By:<br>
                    Towards:<br>
                    Place:
                </p>
            </div>
            <div class="column" style="text-align: left; width: 40%">
                <p>
                    <b>{{ receipt.amount }}/-</b><br>
                    {% if receipt.paymethod != 'CASH' %}
                    {{ receipt.paymethod }} DRAWN ON {{ receipt.bank }}, No. {{ receipt.doc_num }}<br>
                    {% else %}
                    {{ receipt.paymethod }}<br>
                    {% endif %}
                    {{ receipt.purpose }}<br>
                    {{ receipt.place }}
                </p>
            </div>
            <div class="column" style="width: 100%">
            </div>
        </div>

        <hr>

        {% if receipt.amount > 2000 %}
        <p class="middle">
            THIS DONATION DOES NOT QUALIFY FOR EXEMPTION<br>
            UNDER SEC. 80G OF THE INCOME TAX ACT, 1961.
        </p>
        {% endif %}

        <div class="middle">
            <button id="printBtn" onClick="printPage()">PRINT</button>
        </div>
    </div>
    {% endblock %}
</body>

</html>
